{"ast":null,"code":"var _jsxFileName = \"/Users/seangong/WebstormProjects/Spotify/client/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { Button } from '@mui/material';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [users, setUsers] = useState([]);\n  useEffect(() => {\n    const fetchUserData = async () => {\n      const code = new URLSearchParams(window.location.search).get('code');\n      if (code) {\n        try {\n          const res = await axios.post('http://localhost:3001/callback', {\n            code\n          });\n          setUsers(prev => [...prev, {\n            accessToken: res.data.accessToken,\n            userId: res.data.userId\n          }]);\n          window.history.pushState({}, null, '/'); // Clear the URL parameters\n        } catch (err) {\n          console.error('Error in token exchange:', err);\n        }\n      }\n    };\n    fetchUserData();\n  }, []);\n  const handleLogin = userNumber => {\n    window.location = `http://localhost:3001/login?user=${userNumber}`;\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [users.length < 2 && /*#__PURE__*/_jsxDEV(Button, {\n      variant: \"contained\",\n      color: \"primary\",\n      onClick: () => handleLogin(users.length + 1),\n      style: {\n        fontWeight: 'bold',\n        margin: '10px'\n      },\n      children: [\"Log in with Spotify for user \", users.length + 1, \".\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 17\n    }, this), users.length === 2 && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [users.map((user, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: [\"User \", index + 1, \" Tracks:\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(TopTracks, {\n          accessToken: user.accessToken,\n          userId: user.userId\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 29\n        }, this)]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 25\n      }, this)), /*#__PURE__*/_jsxDEV(TracksComponent, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 29,\n    columnNumber: 9\n  }, this);\n}\n_s(App, \"JadZszbqna06PpJs9hMo7Hl/LOY=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","axios","Button","jsxDEV","_jsxDEV","App","_s","users","setUsers","fetchUserData","code","URLSearchParams","window","location","search","get","res","post","prev","accessToken","data","userId","history","pushState","err","console","error","handleLogin","userNumber","className","children","length","variant","color","onClick","style","fontWeight","margin","fileName","_jsxFileName","lineNumber","columnNumber","map","user","index","TopTracks","TracksComponent","_c","$RefreshReg$"],"sources":["/Users/seangong/WebstormProjects/Spotify/client/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { Button } from '@mui/material';\n\nfunction App() {\n    const [users, setUsers] = useState([]);\n\n    useEffect(() => {\n        const fetchUserData = async () => {\n            const code = new URLSearchParams(window.location.search).get('code');\n            if (code) {\n                try {\n                    const res = await axios.post('http://localhost:3001/callback', { code });\n                    setUsers(prev => [...prev, { accessToken: res.data.accessToken, userId: res.data.userId }]);\n                    window.history.pushState({}, null, '/'); // Clear the URL parameters\n                } catch (err) {\n                    console.error('Error in token exchange:', err);\n                }\n            }\n        };\n        fetchUserData();\n    }, []);\n\n    const handleLogin = (userNumber) => {\n        window.location = `http://localhost:3001/login?user=${userNumber}`;\n    };\n\n    return (\n        <div className=\"App\">\n            {users.length < 2 && (\n                <Button\n                    variant=\"contained\"\n                    color=\"primary\"\n                    onClick={() => handleLogin(users.length + 1)}\n                    style={{ fontWeight: 'bold', margin: '10px' }}\n                >\n                    Log in with Spotify for user {users.length + 1}.\n                </Button>\n            )}\n            {users.length === 2 && (\n                <div>\n                    {users.map((user, index) => (\n                        <div key={index}>\n                            <h2>User {index + 1} Tracks:</h2>\n                            {/* Assuming TopTracks displays something meaningful with user's data */}\n                            <TopTracks accessToken={user.accessToken} userId={user.userId} />\n                        </div>\n                    ))}\n                    <TracksComponent />\n                </div>\n            )}\n        </div>\n    );\n}\n\nexport default App;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,MAAM,QAAQ,eAAe;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEvC,SAASC,GAAGA,CAAA,EAAG;EAAAC,EAAA;EACX,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGT,QAAQ,CAAC,EAAE,CAAC;EAEtCC,SAAS,CAAC,MAAM;IACZ,MAAMS,aAAa,GAAG,MAAAA,CAAA,KAAY;MAC9B,MAAMC,IAAI,GAAG,IAAIC,eAAe,CAACC,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC,CAACC,GAAG,CAAC,MAAM,CAAC;MACpE,IAAIL,IAAI,EAAE;QACN,IAAI;UACA,MAAMM,GAAG,GAAG,MAAMf,KAAK,CAACgB,IAAI,CAAC,gCAAgC,EAAE;YAAEP;UAAK,CAAC,CAAC;UACxEF,QAAQ,CAACU,IAAI,IAAI,CAAC,GAAGA,IAAI,EAAE;YAAEC,WAAW,EAAEH,GAAG,CAACI,IAAI,CAACD,WAAW;YAAEE,MAAM,EAAEL,GAAG,CAACI,IAAI,CAACC;UAAO,CAAC,CAAC,CAAC;UAC3FT,MAAM,CAACU,OAAO,CAACC,SAAS,CAAC,CAAC,CAAC,EAAE,IAAI,EAAE,GAAG,CAAC,CAAC,CAAC;QAC7C,CAAC,CAAC,OAAOC,GAAG,EAAE;UACVC,OAAO,CAACC,KAAK,CAAC,0BAA0B,EAAEF,GAAG,CAAC;QAClD;MACJ;IACJ,CAAC;IACDf,aAAa,CAAC,CAAC;EACnB,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMkB,WAAW,GAAIC,UAAU,IAAK;IAChChB,MAAM,CAACC,QAAQ,GAAI,oCAAmCe,UAAW,EAAC;EACtE,CAAC;EAED,oBACIxB,OAAA;IAAKyB,SAAS,EAAC,KAAK;IAAAC,QAAA,GACfvB,KAAK,CAACwB,MAAM,GAAG,CAAC,iBACb3B,OAAA,CAACF,MAAM;MACH8B,OAAO,EAAC,WAAW;MACnBC,KAAK,EAAC,SAAS;MACfC,OAAO,EAAEA,CAAA,KAAMP,WAAW,CAACpB,KAAK,CAACwB,MAAM,GAAG,CAAC,CAAE;MAC7CI,KAAK,EAAE;QAAEC,UAAU,EAAE,MAAM;QAAEC,MAAM,EAAE;MAAO,CAAE;MAAAP,QAAA,GACjD,+BACgC,EAACvB,KAAK,CAACwB,MAAM,GAAG,CAAC,EAAC,GACnD;IAAA;MAAAO,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CACX,EACAlC,KAAK,CAACwB,MAAM,KAAK,CAAC,iBACf3B,OAAA;MAAA0B,QAAA,GACKvB,KAAK,CAACmC,GAAG,CAAC,CAACC,IAAI,EAAEC,KAAK,kBACnBxC,OAAA;QAAA0B,QAAA,gBACI1B,OAAA;UAAA0B,QAAA,GAAI,OAAK,EAACc,KAAK,GAAG,CAAC,EAAC,UAAQ;QAAA;UAAAN,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eAEjCrC,OAAA,CAACyC,SAAS;UAAC1B,WAAW,EAAEwB,IAAI,CAACxB,WAAY;UAACE,MAAM,EAAEsB,IAAI,CAACtB;QAAO;UAAAiB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC;MAAA,GAH3DG,KAAK;QAAAN,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAIV,CACR,CAAC,eACFrC,OAAA,CAAC0C,eAAe;QAAAR,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAClB,CACR;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACA,CAAC;AAEd;AAACnC,EAAA,CAjDQD,GAAG;AAAA0C,EAAA,GAAH1C,GAAG;AAmDZ,eAAeA,GAAG;AAAC,IAAA0C,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}