{"ast":null,"code":"var _jsxFileName = \"/Users/seangong/WebstormProjects/Spotify/client/src/TracksComponent.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction TracksComponent() {\n  _s();\n  const [userTracks, setUserTracks] = useState({});\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  // Function to fetch user IDs from the backend\n  const fetchUserIds = async () => {\n    try {\n      const url = 'http://localhost:3001/user-ids';\n      const response = await axios.get(url);\n      if (response.data.length === 1) {\n        throw new Error('There\\'s only one user/no user');\n      } else if (response.data.length === 0) {\n        throw new Error(\"There\\'s no user logged in, please log in,\");\n      }\n      return response.data;\n    } catch (err) {\n      setError(err.message);\n      setLoading(false);\n      return []; // Return empty array on error to prevent further processing\n    }\n  };\n\n  // Function to fetch tracks for a specific user\n  const fetchTracks = async userId => {\n    try {\n      const url = `http://localhost:3001/get-tracks/${userId}`;\n      const response = await axios.get(url);\n      return {\n        userId,\n        tracks: response.data.map(track => ({\n          ...track,\n          artist: track.artist\n        }))\n      };\n    } catch (err) {\n      setError(`Failed to fetch tracks for user ${userId}`);\n      console.log(err);\n      return null; // Return null on error to handle it gracefully\n    }\n  };\n  useEffect(() => {\n    setLoading(true);\n    fetchUserIds().then(userIds => {\n      Promise.all(userIds.map(userId => fetchTracks(userId))).then(results => {\n        setUserTracks(results.reduce((acc, result) => {\n          if (result) {\n            // Check if result is not null\n            acc[result.userId] = result.tracks;\n          }\n          return acc;\n        }, {}));\n        setLoading(false);\n      });\n    });\n  }, []);\n  let displayContent;\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 25\n  }, this);\n  if (error) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [\"Error: \", error]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 23\n  }, this);\n  if (Object.keys(userTracks).length > 0) {\n    displayContent = Object.entries(userTracks).map(([userId, tracks]) => /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: [\"User: \", userId]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: tracks.map((track, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [track.name, \" by \", track.artist]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 17\n      }, this)]\n    }, userId, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }, this));\n  } else {\n    displayContent = /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"No tracks found.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 26\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Top Tracks by User\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }, this), displayContent]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 9\n  }, this);\n}\n_s(TracksComponent, \"P7KgMvUFbysUx/fIw5IuAhKNP7k=\");\n_c = TracksComponent;\nexport default TracksComponent;\nvar _c;\n$RefreshReg$(_c, \"TracksComponent\");","map":{"version":3,"names":["React","useState","useEffect","axios","jsxDEV","_jsxDEV","TracksComponent","_s","userTracks","setUserTracks","loading","setLoading","error","setError","fetchUserIds","url","response","get","data","length","Error","err","message","fetchTracks","userId","tracks","map","track","artist","console","log","then","userIds","Promise","all","results","reduce","acc","result","displayContent","children","fileName","_jsxFileName","lineNumber","columnNumber","Object","keys","entries","index","name","_c","$RefreshReg$"],"sources":["/Users/seangong/WebstormProjects/Spotify/client/src/TracksComponent.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\n\nfunction TracksComponent() {\n    const [userTracks, setUserTracks] = useState({});\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState(null);\n\n    // Function to fetch user IDs from the backend\n    const fetchUserIds = async () => {\n        try {\n            const url = 'http://localhost:3001/user-ids';\n            const response = await axios.get(url);\n            if (response.data.length === 1 ) {\n                throw new Error('There\\'s only one user/no user');\n            } else if (response.data.length  === 0) {\n                throw new Error(\"There\\'s no user logged in, please log in,\")\n            }\n            return response.data;\n        } catch (err) {\n            setError(err.message);\n            setLoading(false);\n            return [];  // Return empty array on error to prevent further processing\n        }\n    };\n\n    // Function to fetch tracks for a specific user\n    const fetchTracks = async (userId) => {\n        try {\n            const url = `http://localhost:3001/get-tracks/${userId}`;\n            const response = await axios.get(url);\n            return {\n                userId,\n                tracks: response.data.map(track => ({\n                    ...track,\n                    artist: track.artist\n                }))\n            };\n        } catch (err) {\n            setError(`Failed to fetch tracks for user ${userId}`);\n            console.log(err);\n            return null;  // Return null on error to handle it gracefully\n        }\n    };\n\n    useEffect(() => {\n        setLoading(true);\n        fetchUserIds().then(userIds => {\n            Promise.all(userIds.map(userId => fetchTracks(userId)))\n                .then(results => {\n                    setUserTracks(results.reduce((acc, result) => {\n                        if (result) {  // Check if result is not null\n                            acc[result.userId] = result.tracks;\n                        }\n                        return acc;\n                    }, {}));\n                    setLoading(false);\n                });\n        });\n        \n    }, []);\n\n    let displayContent;\n    if (loading) return <div>Loading...</div>;\n    if (error) return <div>Error: {error}</div>;\n\n    if (Object.keys(userTracks).length > 0) {\n        displayContent = Object.entries(userTracks).map(([userId, tracks]) => (\n            <div key={userId}>\n                <h2>User: {userId}</h2>\n                <ul>\n                    {tracks.map((track, index) => (\n                        <li key={index}>\n                            {track.name} by {track.artist}\n                        </li>\n                    ))}\n                </ul>\n            </div>\n        ));\n    } else {\n        displayContent = <p>No tracks found.</p>;\n    }\n\n    return (\n        <div>\n            <h1>Top Tracks by User</h1>\n            {displayContent}\n        </div>\n    );\n}\n\nexport default TracksComponent;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,OAAOC,KAAK,MAAM,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE1B,SAASC,eAAeA,CAAA,EAAG;EAAAC,EAAA;EACvB,MAAM,CAACC,UAAU,EAAEC,aAAa,CAAC,GAAGR,QAAQ,CAAC,CAAC,CAAC,CAAC;EAChD,MAAM,CAACS,OAAO,EAAEC,UAAU,CAAC,GAAGV,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACW,KAAK,EAAEC,QAAQ,CAAC,GAAGZ,QAAQ,CAAC,IAAI,CAAC;;EAExC;EACA,MAAMa,YAAY,GAAG,MAAAA,CAAA,KAAY;IAC7B,IAAI;MACA,MAAMC,GAAG,GAAG,gCAAgC;MAC5C,MAAMC,QAAQ,GAAG,MAAMb,KAAK,CAACc,GAAG,CAACF,GAAG,CAAC;MACrC,IAAIC,QAAQ,CAACE,IAAI,CAACC,MAAM,KAAK,CAAC,EAAG;QAC7B,MAAM,IAAIC,KAAK,CAAC,gCAAgC,CAAC;MACrD,CAAC,MAAM,IAAIJ,QAAQ,CAACE,IAAI,CAACC,MAAM,KAAM,CAAC,EAAE;QACpC,MAAM,IAAIC,KAAK,CAAC,4CAA4C,CAAC;MACjE;MACA,OAAOJ,QAAQ,CAACE,IAAI;IACxB,CAAC,CAAC,OAAOG,GAAG,EAAE;MACVR,QAAQ,CAACQ,GAAG,CAACC,OAAO,CAAC;MACrBX,UAAU,CAAC,KAAK,CAAC;MACjB,OAAO,EAAE,CAAC,CAAE;IAChB;EACJ,CAAC;;EAED;EACA,MAAMY,WAAW,GAAG,MAAOC,MAAM,IAAK;IAClC,IAAI;MACA,MAAMT,GAAG,GAAI,oCAAmCS,MAAO,EAAC;MACxD,MAAMR,QAAQ,GAAG,MAAMb,KAAK,CAACc,GAAG,CAACF,GAAG,CAAC;MACrC,OAAO;QACHS,MAAM;QACNC,MAAM,EAAET,QAAQ,CAACE,IAAI,CAACQ,GAAG,CAACC,KAAK,KAAK;UAChC,GAAGA,KAAK;UACRC,MAAM,EAAED,KAAK,CAACC;QAClB,CAAC,CAAC;MACN,CAAC;IACL,CAAC,CAAC,OAAOP,GAAG,EAAE;MACVR,QAAQ,CAAE,mCAAkCW,MAAO,EAAC,CAAC;MACrDK,OAAO,CAACC,GAAG,CAACT,GAAG,CAAC;MAChB,OAAO,IAAI,CAAC,CAAE;IAClB;EACJ,CAAC;EAEDnB,SAAS,CAAC,MAAM;IACZS,UAAU,CAAC,IAAI,CAAC;IAChBG,YAAY,CAAC,CAAC,CAACiB,IAAI,CAACC,OAAO,IAAI;MAC3BC,OAAO,CAACC,GAAG,CAACF,OAAO,CAACN,GAAG,CAACF,MAAM,IAAID,WAAW,CAACC,MAAM,CAAC,CAAC,CAAC,CAClDO,IAAI,CAACI,OAAO,IAAI;QACb1B,aAAa,CAAC0B,OAAO,CAACC,MAAM,CAAC,CAACC,GAAG,EAAEC,MAAM,KAAK;UAC1C,IAAIA,MAAM,EAAE;YAAG;YACXD,GAAG,CAACC,MAAM,CAACd,MAAM,CAAC,GAAGc,MAAM,CAACb,MAAM;UACtC;UACA,OAAOY,GAAG;QACd,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;QACP1B,UAAU,CAAC,KAAK,CAAC;MACrB,CAAC,CAAC;IACV,CAAC,CAAC;EAEN,CAAC,EAAE,EAAE,CAAC;EAEN,IAAI4B,cAAc;EAClB,IAAI7B,OAAO,EAAE,oBAAOL,OAAA;IAAAmC,QAAA,EAAK;EAAU;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAK,CAAC;EACzC,IAAIhC,KAAK,EAAE,oBAAOP,OAAA;IAAAmC,QAAA,GAAK,SAAO,EAAC5B,KAAK;EAAA;IAAA6B,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAM,CAAC;EAE3C,IAAIC,MAAM,CAACC,IAAI,CAACtC,UAAU,CAAC,CAACW,MAAM,GAAG,CAAC,EAAE;IACpCoB,cAAc,GAAGM,MAAM,CAACE,OAAO,CAACvC,UAAU,CAAC,CAACkB,GAAG,CAAC,CAAC,CAACF,MAAM,EAAEC,MAAM,CAAC,kBAC7DpB,OAAA;MAAAmC,QAAA,gBACInC,OAAA;QAAAmC,QAAA,GAAI,QAAM,EAAChB,MAAM;MAAA;QAAAiB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC,eACvBvC,OAAA;QAAAmC,QAAA,EACKf,MAAM,CAACC,GAAG,CAAC,CAACC,KAAK,EAAEqB,KAAK,kBACrB3C,OAAA;UAAAmC,QAAA,GACKb,KAAK,CAACsB,IAAI,EAAC,MAAI,EAACtB,KAAK,CAACC,MAAM;QAAA,GADxBoB,KAAK;UAAAP,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAEV,CACP;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACF,CAAC;IAAA,GARCpB,MAAM;MAAAiB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OASX,CACR,CAAC;EACN,CAAC,MAAM;IACHL,cAAc,gBAAGlC,OAAA;MAAAmC,QAAA,EAAG;IAAgB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAG,CAAC;EAC5C;EAEA,oBACIvC,OAAA;IAAAmC,QAAA,gBACInC,OAAA;MAAAmC,QAAA,EAAI;IAAkB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,EAC1BL,cAAc;EAAA;IAAAE,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACd,CAAC;AAEd;AAACrC,EAAA,CAtFQD,eAAe;AAAA4C,EAAA,GAAf5C,eAAe;AAwFxB,eAAeA,eAAe;AAAC,IAAA4C,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}